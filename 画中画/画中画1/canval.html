<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><!--告诉浏览器直接使用最高版本-->
    <meta name="viewport" content="width=750,
    	user-scalable=no"><!--响应式缩放(视口)-->
    <title>画中画</title>
    <style>
        *{padding: 0;margin: 0;text-decoration:none;list-style: none;font-family: 微软雅黑;outline: none;}
        .collection{
            display: none;
        }
        #btn{
            width: 300px;
            height: 100px;
            font-size: 36px;
            position: absolute;
            left: 0;
            bottom: 0;
        }
    </style>
    </head>
<body>
<canvas id="app" width="750" height="1206"></canvas>
<button id="btn" onclick="start()">start</button>
<div class="collection">
    <img src="css/images/p1.jpg">
    <img src="css/images/p2.jpg">
    <img src="css/images/p3.jpg">
</div>
<script>
    domList=document.querySelector('.collection').children;
    index=0;
    radio=1;
    var imgNext=[
        {
            imgW: "1875",
            imgH: "3015",
            areaW: "152",
            areaH: "244",
            areaL: "360",
            areaT: "1060"
        },
        {
            imgW: "1875",
            imgH: "3015",
            areaW: "442",
            areaH: "744",
            areaL: "1300",
            areaT: "1100",
            gif: "p1"
        },
        {
            imgW: "1875",
            imgH: "3015",
            areaW: "200",
            areaH: "300",
            areaL: "100",
            areaT: "900",
            gif: "p1"
        }
    ]
    function start() {
        if(radio<0.3&&index!=2){
            radio=1
            index++
            drawImgOversize(domList[index], imgNext[index].imgW, imgNext[index].imgH, imgNext[index].areaW, imgNext[index].areaH, imgNext[index].areaL, imgNext[index].areaT, radio)
        }else if(index==2&&radio<0.134){

        }else {
            console.log(radio);
            radio=0.8*radio
            drawImgOversize(domList[index], imgNext[index].imgW, imgNext[index].imgH, imgNext[index].areaW, imgNext[index].areaH, imgNext[index].areaL, imgNext[index].areaT, radio)
        }

    }


    function drawImgOversize(img, imgNextWidth,imgNextHeight,imgNextAreaWidth, imgNextAreaHeight, imgNextAreaL, imgNextAreaT, radio) {
        var sx = imgNextAreaL - (imgNextAreaWidth / radio - imgNextAreaWidth) * (imgNextAreaL / (imgNextWidth - imgNextAreaWidth)),
            sy = imgNextAreaT - (imgNextAreaHeight / radio - imgNextAreaHeight) * (imgNextAreaT / (imgNextHeight - imgNextAreaHeight)),
            swidth = imgNextAreaWidth / radio,
            sheight = imgNextAreaHeight / radio,
            x = 0,
            y = 0,
            width = 750,
            height = 1206;

        var   c=document.querySelector('#app')
        var  ctx=c.getContext('2d');
            ctx.drawImage(img, sx, sy, swidth, sheight, x, y, width, height);
    };


</script>
</body>
</html>